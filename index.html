<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://cdn.bootcss.com/echarts/4.2.1-rc1/echarts.min.js"></script>
    <title>First Practice</title>
</head>
<body>
    <div id="timePicker"></div>
    <div id="main" style="width: 600px; height:400px;" ></div>
    <script>
        fetch("student_population_daily.json")
        .then((res) => res.json())
        .then((data) => {
            var myDiv1 = document.getElementById('timePicker');
            var myDiv2 = document.getElementById('main');
            var dataList = [];
            for (var time in data) {
                dataList.push(time);
            }
            // Create and append select list
            var selectList = document.createElement("select");
            selectList.id = "mySelect";
            myDiv1.appendChild(selectList);

            // Create and append the options
            for (var i =0; i < dataList.length; i++) {
                var option = document.createElement("option");
                option.value = dataList[i];
                option.text = dataList[i];
                selectList.appendChild(option);
            }

            selectList.addEventListener("change", function() {
                var time = this.options[this.selectedIndex].value;
                // console.log(time)
                var myChart = echarts.init(myDiv2);
                var option = {
                    textStyle:{
                        fontFamily: 'Dosis',
                    },
                    title: [{
                        text: "Student Distribution",            
                        textAlign:'left',
                        textStyle:{
                            fontFamily: 'Cormorant Garamond',
                            fontSize: 20,
                        }
                    }],
                    color: ['#eb2b17'],
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'shadow'
                        },           
                    },
                    grid: {
                        left: 90
                    },
                    xAxis: {
                        position:'top',
                        type: 'value',
                        boundaryGap: [0, 0.01]
                    },
                    yAxis: {
                        type: 'category',
                        inverse: true,
                        data: data[time]["building"]
                    },
                    series: [
                        {
                            name: 'number of people',
                            type: 'bar',
                            data: data[time]["population"]
                        }
                    ]
                };
                myChart.setOption(option);
            })
        })
        
    </script>
</body>
</html>